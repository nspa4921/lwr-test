import{WeakMapCtor as e,WeakMapGet as t,WeakMapSet as r,ObjectAssign as o,ObjectGetOwnPropertyDescriptors as n,SANDBOX_EVAL_CONTEXT_NAME as a,toString as l,StringMatch as i,StringReplace as s,SANDBOX_EVAL_HELPERS_NAME as c,LOCKER_IDENTIFIER_MARKER as u,isObjectLike as p,SymbolFor as y,LOCKER_UNMINIFIED_FLAG as LOCKER_UNMINIFIED_FLAG$LWS,ArrayIsArray as f,ReflectDefineProperty as d,isNearMembrane as h,ReflectApply as S,ArrayProtoPush as b,ObjectToString as g,ObjectKeys as $,TO_STRING_BRAND_SYMBOL as W,ArrayIncludes as L,ArrayUnshift as v,TO_STRING_BRAND_STRING as P,ArrayFilter as T,RegExpTest as w,MathMin as x,StringSlice as O,StringCtor as m,getNearMembraneSerializedValue as _,TO_STRING_BRAND_NUMBER as E,TO_STRING_BRAND_BOOLEAN as A,TO_STRING_BRAND_BIG_INT as B,ReflectOwnKeys as H,ArraySort as C,isObject as k,NumberIsFinite as j,JSONStringify as D}from"@locker/shared";import{SandboxType as M,createExternalDistortionEntries as F,createInternalDistortionEntries as G}from"@locker/distortion";import{defaultInstrumentation as I}from"@locker/instrumentation";import{isWindowLike as R,isWindow as N}from"@locker/shared-dom";const K=new WeakMap;function createMembraneMarshall$LWS(e){const t=Array,r=ArrayBuffer,o=Error,n=Object,a=Proxy,l=Reflect,i=RegExp,s=Symbol,c=TypeError,u=WeakMap,{for:p,toStringTag:y}=s,f=/\w*$/,d=Symbol.for("@@lockerDebugMode"),h=p("@@lockerLiveValue"),S=p("@@lockerNearMembraneSerializedValue"),b=p("@@lockerNearMembrane"),g=p("@@lockerNearMembraneUndefinedValue"),LOCKER_UNMINIFIED_FLAG$LWS=`${()=>
/* $LWS */
1}`.includes("*");let $=LOCKER_UNMINIFIED_FLAG$LWS&&void 0;const W="function"==typeof BigInt,{assign:L,defineProperties:v,freeze:P,getOwnPropertyDescriptor:T,getOwnPropertyDescriptors:w,isFrozen:x,isSealed:O,prototype:m,seal:_}=n,{__defineGetter__:E,__defineSetter__:A,__lookupGetter__:B,__lookupSetter__:H,hasOwnProperty:C,propertyIsEnumerable:k,toString:j}=m,{apply:D,construct:M,defineProperty:F,deleteProperty:G,get:I,getOwnPropertyDescriptor:R,getPrototypeOf:N,has:V,isExtensible:U,ownKeys:z,preventExtensions:Z,set:X,setPrototypeOf:J}=l,{isArray:Y}=t,{includes:q,indexOf:Q,slice:ee}=t.prototype,{isView:te}=r,re=D(B,r.prototype,["byteLength"]),oe=W?BigInt.prototype.valueOf:void 0,{valueOf:ne}=Boolean.prototype,{toString:ae}=o.prototype,{bind:le}=Function.prototype,{stringify:ie}=JSON,{valueOf:se}=Number.prototype,{revocable:ce}=a,{prototype:ue}=i,{exec:pe,test:ye,toString:fe}=ue,de=D(B,ue,["flags"])||function(){const e=D(fe,this,[]);return D(pe,f,[e])[0]},he=D(B,ue,["source"]),{replace:Se,slice:be,valueOf:ge}=String.prototype,{valueOf:$e}=s.prototype,{get:We,set:Le}=u.prototype,ve=console,{info:Pe}=ve,Te=eval,we="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||(F(m,"globalThis",{__proto__:null,configurable:!0,get(){return G(m,"globalThis"),this||self}}),globalThis);let xe=!1,Oe=!1;const me=new i(`${D(Se,"$LWS",[/[\\^$.*+?()[\]{}|]/g,"\\$&"])}(?=\\.|$)`);function alwaysFalse$LWS(){return!1}function identity$LWS(e){return e}const _e=LOCKER_UNMINIFIED_FLAG$LWS?()=>{if(xe)return;xe=!0;const e=(()=>{var e;o.prepareStackTrace=(e,t)=>t;const t=(new o).stack;return delete o.prepareStackTrace,Y(t)&&t.length>0?null==(e=t[0])?void 0:e.constructor:void 0})();if("function"!=typeof e)return;const{getEvalOrigin:t,getFunctionName:r,toString:n}=e.prototype;o.prepareStackTrace=function(e,o){return function(e,o){let a="";try{a=D(ae,e,[])}catch(e){a="<error>"}let l=!1;for(let e=0,{length:i}=o;e<i;e+=1){const i=o[e],s=D(r,i,[]);let c=!1;if("string"==typeof s&&"eval"!==s&&D(ye,me,[s])&&(c=!0),!c){const e=D(t,i,[]);"string"==typeof e&&D(ye,me,[e])&&(c=!0)}if(c)l||(l=!0,a+="\n    at LWS");else{l=!1;try{a+=`\n    at ${D(n,i,[])}`}catch(e){}}}return a}(e,o)};const{stackTraceLimit:a}=o;("number"!=typeof a||a<20)&&(o.stackTraceLimit=20)}:noop$LWS;function noop$LWS(){}const Ee=e?e=>D(oe,e,[]):noop$LWS,Ae=e?e=>D(ne,e,[]):noop$LWS,Be=e?e=>D(se,e,[]):noop$LWS,He=e?e=>{if(e!==ue){const t=D(he,e,[]);return ie({__proto__:null,flags:D(de,e,[]),source:t})}}:noop$LWS,Ce=e?e=>D(ge,e,[]):noop$LWS,ke=e?e=>D($e,e,[]):noop$LWS,je=e?e=>{switch(D(j,e,[])){case"[object Boolean]":return Ae(e);case"[object Number]":return Be(e);case"[object RegExp]":return He(e);case"[object String]":return Ce(e);case"[object Object]":try{return ke(e)}catch(e){}if(W)try{return Ee(e)}catch(e){}default:return}}:noop$LWS,De=e?e=>{try{return ke(e)}catch(e){}if(W)try{return Ee(e)}catch(e){}try{return Ae(e)}catch(e){}try{return Be(e)}catch(e){}try{return He(e)}catch(e){}try{return Ce(e)}catch(e){}}:noop$LWS;return function(r,o,i){const{distortionCallback:s=identity$LWS,instrumentation:p}=L({__proto__:null},i),f=!e&&"object"==typeof p&&null!==p,W={__proto__:null,0:void 0,1:void 0,2:void 0,3:void 0,4:void 0,n:void 0},oe={__proto__:null,0:void 0,1:void 0,2:void 0,3:void 0,4:void 0,n:void 0},ne=new u,ae=new u,ie=f?p.startActivity:void 0;let se,pe,ye,fe,de,Se,ge,$e,xe,me,Ee,Ae,Be,He,Ce,ke,Me,Fe,Ge,Ie,Re,Ne,Ke,Ve,Ue,ze,Ze,Xe=0,Je=!1;const Ye=e?(e,t,r)=>{r[t]=!1;const o=getTransferablePointer$LWS(e);let n;try{ge(o,t,(e,t,r,o,a,l,i)=>{n=createDescriptorFromMeta$LWS(t,r,o,a,l,i)})}catch(e){var a;const t=null!=(a=Ze)?a:e;throw Ze=void 0,t}n?F(e,t,n):delete e[t]}:noop$LWS;function copyForeignOwnPropertyDescriptorsAndPrototypeToShadowTarget$LWS(e,t){let r,o,n;f&&(r=ie("callableBatchGetPrototypeOfAndGetOwnPropertyDescriptors"));try{o=Ve(e,(...e)=>{const r={};for(let t=0,{length:o}=e;t<o;t+=7){r[e[t]]=createDescriptorFromMeta$LWS(e[t+1],e[t+2],e[t+3],e[t+4],e[t+5],e[t+6])}v(t,r)})}catch(e){var a;const t=null!=(a=Ze)?a:e;throw Ze=void 0,f&&r.error(t),t}finally{f&&r.stop()}"function"==typeof o?(o(),n=Ze,Ze=void 0):n=null,J(t,n)}function createApplyOrConstructTrapForZeroOrMoreArgs$LWS(e){const t=1&e,r=t?"callableApplyWithZeroOrMoreArgs":"callableConstructWithZeroOrMoreArgs",o=t?W:oe,n=t?pe:ye;return function(a,l,i){Xe=e;const s=t?i:l,{length:c}=s;var u;if(0!==c)return D(null!=(u=o[c])?u:o.n,this,[a,l,i]);let p;f&&(p=ie(r));const{foreignTargetPointer:y}=this,d=t?l:i;try{const e=n(y,"object"==typeof d&&null!==d||"function"==typeof d?getTransferablePointer$LWS(d):"undefined"==typeof d?void 0:d);let t;return"function"==typeof e?(e(),t=Ze,Ze=void 0):t=e,t}catch(e){var h;const t=null!=(h=Ze)?h:e;throw Ze=void 0,f&&p.error(t),t}finally{f&&p.stop()}}}function createApplyOrConstructTrapForOneOrMoreArgs$LWS(e){const t=1&e,r=t?"callableApplyWithOneOrMoreArgs":"callableConstructWithOneOrMoreArgs",o=t?W:oe,n=t?pe:ye;return function(a,l,i){Xe=e;const s=t?i:l,{length:c}=s;var u;if(1!==c)return D(null!=(u=o[c])?u:o.n,this,[a,l,i]);let p;f&&(p=ie(r));const{foreignTargetPointer:y}=this,d=t?l:i;try{const{0:e}=s,t=n(y,"object"==typeof d&&null!==d||"function"==typeof d?getTransferablePointer$LWS(d):"undefined"==typeof d?void 0:d,"object"==typeof e&&null!==e||"function"==typeof e?getTransferablePointer$LWS(e):"undefined"==typeof e?void 0:e);let r;return"function"==typeof t?(t(),r=Ze,Ze=void 0):r=t,r}catch(e){var h;const t=null!=(h=Ze)?h:e;throw Ze=void 0,f&&p.error(t),t}finally{f&&p.stop()}}}function createApplyOrConstructTrapForTwoOrMoreArgs$LWS(e){const t=1&e,r=t?"callableApplyWithTwoOrMoreArgs":"callableConstructWithTwoOrMoreArgs",o=t?W:oe,n=t?pe:ye;return function(a,l,i){Xe=e;const s=t?i:l,{length:c}=s;var u;if(2!==c)return D(null!=(u=o[c])?u:o.n,this,[a,l,i]);let p;f&&(p=ie(r));const{foreignTargetPointer:y}=this,d=t?l:i;try{const{0:e,1:t}=s,r=n(y,"object"==typeof d&&null!==d||"function"==typeof d?getTransferablePointer$LWS(d):"undefined"==typeof d?void 0:d,"object"==typeof e&&null!==e||"function"==typeof e?getTransferablePointer$LWS(e):"undefined"==typeof e?void 0:e,"object"==typeof t&&null!==t||"function"==typeof t?getTransferablePointer$LWS(t):"undefined"==typeof t?void 0:t);let o;return"function"==typeof r?(r(),o=Ze,Ze=void 0):o=r,o}catch(e){var h;const t=null!=(h=Ze)?h:e;throw Ze=void 0,f&&p.error(t),t}finally{f&&p.stop()}}}function createApplyOrConstructTrapForThreeOrMoreArgs$LWS(e){const t=1&e,r=t?"callableApplyWithThreeOrMoreArgs":"callableConstructWithThreeOrMoreArgs",o=t?W:oe,n=t?pe:ye;return function(a,l,i){Xe=e;const s=t?i:l,{length:c}=s;var u;if(3!==c)return D(null!=(u=o[c])?u:o.n,this,[a,l,i]);let p;f&&(p=ie(r));const{foreignTargetPointer:y}=this,d=t?l:i;try{const{0:e,1:t,2:r}=s,o=n(y,"object"==typeof d&&null!==d||"function"==typeof d?getTransferablePointer$LWS(d):"undefined"==typeof d?void 0:d,"object"==typeof e&&null!==e||"function"==typeof e?getTransferablePointer$LWS(e):"undefined"==typeof e?void 0:e,"object"==typeof t&&null!==t||"function"==typeof t?getTransferablePointer$LWS(t):"undefined"==typeof t?void 0:t,"object"==typeof r&&null!==r||"function"==typeof r?getTransferablePointer$LWS(r):"undefined"==typeof r?void 0:r);let a;return"function"==typeof o?(o(),a=Ze,Ze=void 0):a=o,a}catch(e){var h;const t=null!=(h=Ze)?h:e;throw Ze=void 0,f&&p.error(t),t}finally{f&&p.stop()}}}function createApplyOrConstructTrapForFourOrMoreArgs$LWS(e){const t=1&e,r=t?"callableApplyWithFourOrMoreArgs":"callableConstructWithFourOrMoreArgs",o=t?W:oe,n=t?pe:ye;return function(a,l,i){Xe=e;const s=t?i:l,{length:c}=s;var u;if(4!==c)return D(null!=(u=o[c])?u:o.n,this,[a,l,i]);let p;f&&(p=ie(r));const{foreignTargetPointer:y}=this,d=t?l:i;try{const{0:e,1:t,2:r,3:o}=s,a=n(y,"object"==typeof d&&null!==d||"function"==typeof d?getTransferablePointer$LWS(d):"undefined"==typeof d?void 0:d,"object"==typeof e&&null!==e||"function"==typeof e?getTransferablePointer$LWS(e):"undefined"==typeof e?void 0:e,"object"==typeof t&&null!==t||"function"==typeof t?getTransferablePointer$LWS(t):"undefined"==typeof t?void 0:t,"object"==typeof r&&null!==r||"function"==typeof r?getTransferablePointer$LWS(r):"undefined"==typeof r?void 0:r,"object"==typeof o&&null!==o||"function"==typeof o?getTransferablePointer$LWS(o):"undefined"==typeof o?void 0:o);let l;return"function"==typeof a?(a(),l=Ze,Ze=void 0):l=a,l}catch(e){var h;const t=null!=(h=Ze)?h:e;throw Ze=void 0,f&&p.error(t),t}finally{f&&p.stop()}}}function createApplyOrConstructTrapForAnyNumberOfArgs$LWS(e){const r=1&e,o=r?"callableApplyWithAnyNumberOfArgs":"callableConstructWithAnyNumberOfArgs",n=r?pe:ye;return function(a,l,i){let s;Xe=e,f&&(s=ie(o));const{foreignTargetPointer:c}=this,u=r?i:l,p=r?l:i,{length:y}=u;let d=2;const h=new t(y+d);h[0]=c;try{h[1]="object"==typeof p&&null!==p||"function"==typeof p?getTransferablePointer$LWS(p):"undefined"==typeof p?void 0:p;for(let e=0;e<y;e+=1){const t=u[e];h[d++]="object"==typeof t&&null!==t||"function"==typeof t?getTransferablePointer$LWS(t):"undefined"==typeof t?void 0:t}const e=D(n,void 0,h);let t;return"function"==typeof e?(e(),t=Ze,Ze=void 0):t=e,t}catch(e){var S;const t=null!=(S=Ze)?S:e;throw Ze=void 0,f&&s.error(t),t}finally{f&&s.stop()}}}function createDescriptorFromMeta$LWS(e,t,r,o,n,a){const l={__proto__:null};if(e!==g&&(l.configurable=e),t!==g&&(l.enumerable=t),r!==g&&(l.writable=r),n!==g){let e;"function"==typeof n?(n(),e=Ze,Ze=void 0):e=n,l.get=e}if(a!==g){let e;"function"==typeof a?(a(),e=Ze,Ze=void 0):e=a,l.set=e}if(o!==g){let e;"function"==typeof o?(o(),e=Ze,Ze=void 0):e=o,l.value=e}return l}function createPointer$LWS(e){return()=>{Ze=e}}const qe=e?e=>{let t=D(We,ne,[e]);if(void 0===t){const r=ke(getTransferablePointer$LWS(e));"function"==typeof r&&(r(),t=Ze,Ze=void 0,t&&D(Le,ne,[e,t]))}return t}:noop$LWS;function getTransferablePointer$LWS(t){let r=D(We,ae,[t]);if(r)return r;const o=e?t:s(t);if(o!==t&&typeof o!=typeof t)throw new c(`Invalid distortion ${t}.`);let n,a=8;try{Y(o)&&(a=1)}catch(e){a=16}if("function"==typeof o){n=0,a=2;try{"prototype"in o||(a|=4);const e=R(t,"length");if(e){J(e,null);const{value:t}=e;"number"==typeof t&&(n=t)}void 0}catch(e){}}return r=se(createPointer$LWS(o),a,n,undefined),D(Le,ae,[t,r]),r}const Qe=e?e=>{if(Oe)return;Oe=!0;const t=Y(e)&&e.length>0,r=t?{__proto__:null}:void 0,o=t?(t,r)=>D(q,e,[r])?{configurable:!1,enumerable:D(k,t,[r]),get:i(r),set:void 0}:R(t,r):void 0,i=t?e=>{let t=r[e];return void 0===t&&(t=D(le,u,[]),r[e]=t),t}:void 0,s=t?(t,r)=>D(q,e,[r])?i(r):D(B,t,[r]):void 0,c=t?(t,r)=>D(q,e,[r])?void 0:D(H,t,[r]):void 0,u=t?()=>we:void 0,wrapDefineAccessOrProperty$LWS=e=>{const{length:t}=e,r=2===t;return new a(e,{apply(o,n,a){if(a.length>=t){const e=r?n:a[0],t=r?a[0]:a[1],o=qe(e);null!=o&&o[t]&&I(e,t)}return D(e,n,a)}})},wrapLookupAccessor$LWS=(e,r)=>new a(e,{apply(o,n,a){if(a.length){const{0:e}=a,o=qe(n);if(null!=o&&o[e]&&I(n,e),t&&n===we)return r(n,e)}return D(e,n,a)}}),wrapGetOwnPropertyDescriptor$LWS=e=>new a(e,{apply(r,n,a){if(a.length>1){const{0:e,1:r}=a,n=qe(e);if(null!=n&&n[r]&&I(e,r),t&&e===we)return o(e,r)}return D(e,n,a)}});var p;l.defineProperty=wrapDefineAccessOrProperty$LWS(F),l.getOwnPropertyDescriptor=wrapGetOwnPropertyDescriptor$LWS(R),n.getOwnPropertyDescriptor=wrapGetOwnPropertyDescriptor$LWS(T),n.getOwnPropertyDescriptors=new a(p=w,{apply(e,r,n){if(!n.length)return D(p,r,n);const{0:a}=n,l=qe(a),i=a===we&&t,s=i?{}:D(p,r,n);if(!i&&void 0===l)return s;const c=z(i?a:s);for(let e=0,{length:t}=c;e<t;e+=1){const t=c[e],r=!(null==l||!l[t]);if(r&&I(a,t),r||i){const e=i?o(a,t):R(a,t);e?s[t]=e:i||delete s[t]}}return s}}),m.__defineGetter__=wrapDefineAccessOrProperty$LWS(E),m.__defineSetter__=wrapDefineAccessOrProperty$LWS(A),m.__lookupGetter__=wrapLookupAccessor$LWS(B,s),m.__lookupSetter__=wrapLookupAccessor$LWS(H,c)}:noop$LWS;function lockShadowTarget$LWS(e,t){copyForeignOwnPropertyDescriptorsAndPrototypeToShadowTarget$LWS(t,e),Z(e)}function lookupForeignDescriptor$LWS(e,t,r){let o,n,a,l;f&&(o=ie("callableBatchGetPrototypeOfWhenHasNoOwnPropertyDescriptor"));try{n=ze(e,r,(e,o,n,l,i,s,c)=>{a=createDescriptorFromMeta$LWS(o,n,l,i,s,c),!1===a.configurable&&F(t,r,a)})}catch(e){var i;const t=null!=(i=Ze)?i:e;throw Ze=void 0,f&&o.error(t),t}finally{f&&o.stop()}if(a)return a;for("function"==typeof n?(n(),l=Ze,Ze=void 0):l=n;l;){if(a=R(l,r),a)return J(a,null),a;l=N(l)}}function pushErrorAcrossBoundary$LWS(e){if("object"==typeof e&&null!==e||"function"==typeof e){getTransferablePointer$LWS(e)()}return e}const et=e?(e,t)=>{D(Le,ne,[e,t]),Ke(getTransferablePointer$LWS(e),getTransferablePointer$LWS(t))}:noop$LWS;class BoundaryProxyHandler$LWS{constructor(t,o,n,a){let l;this.color=r,this.foreignTargetTraits=0;const i=1&o,s=2&o;l=s?4&o?()=>{}:function(){}:i?[]:{};const{proxy:c,revoke:u}=ce(l,this);var p,y;(this.foreignTargetPointer=t,this.foreignTargetTraits=o,this.nonConfigurableDescriptorCallback=(e,t,r,o,n,a,l)=>{F(this.shadowTarget,e,createDescriptorFromMeta$LWS(t,r,o,n,a,l))},this.proxy=c,this.revoke=u,this.serializedValue=void 0,this.shadowTarget=l,this.staticToStringTag=void 0,s)&&(this.apply=null!=(p=W[n])?p:W.n,this.construct=null!=(y=oe[n])?y:oe.n);if(this.defineProperty=BoundaryProxyHandler$LWS.defaultDefinePropertyTrap,this.deleteProperty=BoundaryProxyHandler$LWS.defaultDeletePropertyTrap,this.isExtensible=BoundaryProxyHandler$LWS.defaultIsExtensibleTrap,this.getOwnPropertyDescriptor=BoundaryProxyHandler$LWS.defaultGetOwnPropertyDescriptorTrap,this.getPrototypeOf=BoundaryProxyHandler$LWS.defaultGetPrototypeOfTrap,this.get=BoundaryProxyHandler$LWS.defaultGetTrap,this.has=BoundaryProxyHandler$LWS.defaultHasTrap,this.ownKeys=BoundaryProxyHandler$LWS.defaultOwnKeysTrap,this.preventExtensions=BoundaryProxyHandler$LWS.defaultPreventExtensionsTrap,this.setPrototypeOf=BoundaryProxyHandler$LWS.defaultSetPrototypeOfTrap,this.set=BoundaryProxyHandler$LWS.defaultSetTrap,16&o&&u(),e)i&&this.makeProxyLive();else{if(8&o){let e=g;D(E,this,["serializedValue",()=>(e===g&&(e=Ne(this.foreignTargetPointer)),e)])}P(this)}}makeProxyLive(){this.deleteProperty=BoundaryProxyHandler$LWS.passthruDeletePropertyTrap,this.defineProperty=BoundaryProxyHandler$LWS.passthruDefinePropertyTrap,this.preventExtensions=BoundaryProxyHandler$LWS.passthruPreventExtensionsTrap,this.set=BoundaryProxyHandler$LWS.passthruSetTrap,this.setPrototypeOf=BoundaryProxyHandler$LWS.passthruSetPrototypeOfTrap,P(this)}makeProxyStatic(){this.defineProperty=BoundaryProxyHandler$LWS.staticDefinePropertyTrap,this.deleteProperty=BoundaryProxyHandler$LWS.staticDeletePropertyTrap,this.get=BoundaryProxyHandler$LWS.staticGetTrap,this.getOwnPropertyDescriptor=BoundaryProxyHandler$LWS.staticGetOwnPropertyDescriptorTrap,this.getPrototypeOf=BoundaryProxyHandler$LWS.staticGetPrototypeOfTrap,this.has=BoundaryProxyHandler$LWS.staticHasTrap,this.isExtensible=BoundaryProxyHandler$LWS.staticIsExtensibleTrap,this.ownKeys=BoundaryProxyHandler$LWS.staticOwnKeysTrap,this.preventExtensions=BoundaryProxyHandler$LWS.staticPreventExtensionsTrap,this.set=BoundaryProxyHandler$LWS.staticSetTrap,this.setPrototypeOf=BoundaryProxyHandler$LWS.staticSetPrototypeOfTrap;const{foreignTargetPointer:e,shadowTarget:t}=this,r=Me(e);if(8&r)return P(this),this.revoke(),void 0;try{copyForeignOwnPropertyDescriptorsAndPrototypeToShadowTarget$LWS(e,t)}catch(t){if(Re(e))return P(this),this.revoke(),void 0}if(8&this.foreignTargetTraits&&!V(t,y)){let t="Object";try{t=Fe(e)}catch(e){}"Object"!==t&&(this.staticToStringTag=t)}4&r?P(t):2&r?_(t):1&r?Z(t):!1!==$&&($=Ce("Mutations on the membrane of an object originating outside of the sandbox will not be reflected on the object itself:",e)),P(this)}makeProxyUnambiguous(){Ie(this.foreignTargetPointer)?this.makeProxyLive():this.makeProxyStatic()}static passthruDefinePropertyTrap(e,t,r){let o;Xe=4,f&&(o=ie("callableDefineProperty"));const n=r;J(n,null);const{value:a,get:l,set:i}=n,s="value"in n?"object"==typeof a&&null!==a||"function"==typeof a?getTransferablePointer$LWS(a):"undefined"==typeof a?void 0:a:g,c="get"in n?"object"==typeof l&&null!==l||"function"==typeof l?getTransferablePointer$LWS(l):l:g,u="set"in n?"object"==typeof i&&null!==i||"function"==typeof i?getTransferablePointer$LWS(i):i:g;try{return fe(this.foreignTargetPointer,t,"configurable"in n?!!n.configurable:g,"enumerable"in n?!!n.enumerable:g,"writable"in n?!!n.writable:g,s,c,u,this.nonConfigurableDescriptorCallback)}catch(e){var p;const t=null!=(p=Ze)?p:e;throw Ze=void 0,f&&o.error(t),t}finally{f&&o.stop()}}static passthruDeletePropertyTrap(e,t){let r;Xe=8,f&&(r=ie("callableDeleteProperty"));try{return de(this.foreignTargetPointer,t)}catch(e){var o;const t=null!=(o=Ze)?o:e;throw Ze=void 0,f&&r.error(t),t}finally{f&&r.stop()}}static passthruGetTrap(e,t,r){if(Je&&(Je=128===Xe),Xe=16,Je){if(t===b)return!0;if(t===S)return this.serializedValue}let o;f&&(o=ie("callableGet"));const n="object"==typeof r&&null!==r||"function"==typeof r?getTransferablePointer$LWS(r):r;try{const e=Se(this.foreignTargetPointer,this.foreignTargetTraits,t,n);let r;return"function"==typeof e?(e(),r=Ze,Ze=void 0):r=e,r}catch(e){var a;const t=null!=(a=Ze)?a:e;throw Ze=void 0,f&&o.error(t),t}finally{f&&o.stop()}}static passthruGetPrototypeOfTrap(e){let t,r,o;Xe=64,f&&(t=ie("callableGetPrototypeOf"));try{r=$e(this.foreignTargetPointer)}catch(e){var n;const r=null!=(n=Ze)?n:e;throw Ze=void 0,f&&t.error(r),r}finally{f&&t.stop()}return"function"==typeof r?(r(),o=Ze,Ze=void 0):o=null,o}static passthruHasTrap(e,t){let r,o;Xe=128,f&&(r=ie("callableHas"));try{o=xe(this.foreignTargetPointer,t)}catch(e){var n;const t=null!=(n=Ze)?n:e;throw Ze=void 0,f&&r.error(t),t}finally{f&&r.stop()}return Je=!o&&(t===b||t===S),o}static passthruIsExtensibleTrap(e){Xe=256;const{shadowTarget:t}=this;if(U(t)){let e;f&&(e=ie("callableIsExtensible"));const{foreignTargetPointer:o}=this;try{if(me(o))return!0}catch(t){var r;const o=null!=(r=Ze)?r:t;throw Ze=void 0,f&&e.error(o),o}finally{f&&e.stop()}lockShadowTarget$LWS(t,o)}return!1}static passthruOwnKeysTrap(e){let t,r;Xe=512,f&&(t=ie("callableOwnKeys"));try{Ee(this.foreignTargetPointer,(...e)=>{r=e})}catch(e){var o;const r=null!=(o=Ze)?o:e;throw Ze=void 0,f&&t.error(r),r}finally{f&&t.stop()}return r||[]}static passthruGetOwnPropertyDescriptorTrap(e,t){let r,o;Xe=32,f&&(r=ie("callableGetOwnPropertyDescriptor"));try{ge(this.foreignTargetPointer,t,(e,r,n,a,l,i,s)=>{o=createDescriptorFromMeta$LWS(r,n,a,l,i,s),!1===o.configurable&&F(this.shadowTarget,t,o)})}catch(e){var n;const t=null!=(n=Ze)?n:e;throw Ze=void 0,f&&r.error(t),t}finally{f&&r.stop()}return o}static passthruPreventExtensionsTrap(e){Xe=1024;const{shadowTarget:t}=this;if(U(t)){let e;f&&(e=ie("callablePreventExtensions"));const{foreignTargetPointer:o}=this;let n;try{n=Ae(o)}catch(t){var r;const o=null!=(r=Ze)?r:t;throw Ze=void 0,f&&e.error(o),o}finally{f&&e.stop()}if(2&n)return 1&n||lockShadowTarget$LWS(t,o),!1;lockShadowTarget$LWS(t,o)}return!0}static passthruSetPrototypeOfTrap(e,t){let r;Xe=4096,f&&(r=ie("callableSetPrototypeOf"));const o=t?getTransferablePointer$LWS(t):t;try{return He(this.foreignTargetPointer,o)}catch(e){var n;const t=null!=(n=Ze)?n:e;throw Ze=void 0,f&&r.error(t),t}finally{f&&r.stop()}}static passthruSetTrap(e,t,r,o){Xe=2048;const{foreignTargetPointer:n,proxy:a}=this;return"undefined"==typeof r&&(r=void 0),"undefined"==typeof o&&(o=a),a===o?function(e,t,r,o){let n;f&&(n=ie("callableSet"));const a="object"==typeof r&&null!==r||"function"==typeof r?getTransferablePointer$LWS(r):r,l=getTransferablePointer$LWS(o);try{return Be(e,t,a,l)}catch(e){var i;const t=null!=(i=Ze)?i:e;throw Ze=void 0,f&&n.error(t),t}finally{f&&n.stop()}}(n,t,r,o):function(e,t,r,o,n){const a=lookupForeignDescriptor$LWS(e,t,r);if(a){if("get"in a||"set"in a){const{set:e}=a;return!!e&&(D(e,n,[o]),!0)}if(!1===a.writable)return!1}if(null===n||"function"!=typeof n&&"object"!=typeof n)return!1;const l=R(n,r);return l?(J(l,null),!("get"in l)&&!("set"in l)&&!1!==l.writable&&(F(n,r,{__proto__:null,value:o}),!0)):F(n,r,{__proto__:null,configurable:!0,enumerable:!0,value:o,writable:!0})}(n,this.shadowTarget,t,r,o)}}return BoundaryProxyHandler$LWS.hybridGetTrap=e?function(e,t,r){const{foreignTargetPointer:o,shadowTarget:n}=this,a=lookupForeignDescriptor$LWS(o,n,t);if(a){const{get:e,value:t}=a;return e?D(e,r,[]):t}if(t===y&&8&this.foreignTargetTraits){let e,t;f&&(e=ie("callableGetToStringTagOfTarget"));try{t=Fe(o)}catch(t){var l;const r=null!=(l=Ze)?l:t;throw Ze=void 0,f&&e.error(r),r}finally{f&&e.stop()}if("Object"!==t)return t}}:noop$LWS,BoundaryProxyHandler$LWS.hybridHasTrap=e?function(e,t){let r,o,n;f&&(r=ie("callableBatchGetPrototypeOfWhenHasNoOwnProperty"));try{o=Ue(this.foreignTargetPointer,t)}catch(e){var a;const t=null!=(a=Ze)?a:e;throw Ze=void 0,f&&r.error(t),t}finally{f&&r.stop()}if(!0===o)return!0;for("function"==typeof o?(o(),n=Ze,Ze=void 0):n=o;n;){if(D(C,n,[t]))return!0;n=N(n)}return!1}:alwaysFalse$LWS,BoundaryProxyHandler$LWS.pendingDefinePropertyTrap=e?function(e,t,r){return this.makeProxyUnambiguous(),this.defineProperty(e,t,r)}:alwaysFalse$LWS,BoundaryProxyHandler$LWS.pendingDeletePropertyTrap=e?function(e,t){return this.makeProxyUnambiguous(),this.deleteProperty(e,t)}:alwaysFalse$LWS,BoundaryProxyHandler$LWS.pendingPreventExtensionsTrap=e?function(e){return this.makeProxyUnambiguous(),this.preventExtensions(e)}:alwaysFalse$LWS,BoundaryProxyHandler$LWS.pendingSetPrototypeOfTrap=e?function(e,t){return this.makeProxyUnambiguous(),this.setPrototypeOf(e,t)}:alwaysFalse$LWS,BoundaryProxyHandler$LWS.pendingSetTrap=e?function(e,t,r,o){return this.makeProxyUnambiguous(),this.set(e,t,r,o)}:alwaysFalse$LWS,BoundaryProxyHandler$LWS.staticDefinePropertyTrap=e?F:alwaysFalse$LWS,BoundaryProxyHandler$LWS.staticDeletePropertyTrap=e?G:alwaysFalse$LWS,BoundaryProxyHandler$LWS.staticGetOwnPropertyDescriptorTrap=e?R:noop$LWS,BoundaryProxyHandler$LWS.staticGetPrototypeOfTrap=e?N:()=>null,BoundaryProxyHandler$LWS.staticGetTrap=e?function(e,t,r){const{shadowTarget:o}=this,n=I(o,t,r);return void 0===n&&t===y&&8&this.foreignTargetTraits&&!V(o,t)?this.staticToStringTag:n}:noop$LWS,BoundaryProxyHandler$LWS.staticHasTrap=e?V:alwaysFalse$LWS,BoundaryProxyHandler$LWS.staticIsExtensibleTrap=e?U:alwaysFalse$LWS,BoundaryProxyHandler$LWS.staticOwnKeysTrap=e?z:()=>[],BoundaryProxyHandler$LWS.staticPreventExtensionsTrap=e?Z:alwaysFalse$LWS,BoundaryProxyHandler$LWS.staticSetPrototypeOfTrap=e?J:alwaysFalse$LWS,BoundaryProxyHandler$LWS.staticSetTrap=e?X:alwaysFalse$LWS,BoundaryProxyHandler$LWS.defaultDefinePropertyTrap=e?BoundaryProxyHandler$LWS.pendingDefinePropertyTrap:BoundaryProxyHandler$LWS.passthruDefinePropertyTrap,BoundaryProxyHandler$LWS.defaultDeletePropertyTrap=e?BoundaryProxyHandler$LWS.pendingDeletePropertyTrap:BoundaryProxyHandler$LWS.passthruDeletePropertyTrap,BoundaryProxyHandler$LWS.defaultGetOwnPropertyDescriptorTrap=BoundaryProxyHandler$LWS.passthruGetOwnPropertyDescriptorTrap,BoundaryProxyHandler$LWS.defaultGetPrototypeOfTrap=BoundaryProxyHandler$LWS.passthruGetPrototypeOfTrap,BoundaryProxyHandler$LWS.defaultGetTrap=e?BoundaryProxyHandler$LWS.hybridGetTrap:BoundaryProxyHandler$LWS.passthruGetTrap,BoundaryProxyHandler$LWS.defaultHasTrap=e?BoundaryProxyHandler$LWS.hybridHasTrap:BoundaryProxyHandler$LWS.passthruHasTrap,BoundaryProxyHandler$LWS.defaultIsExtensibleTrap=BoundaryProxyHandler$LWS.passthruIsExtensibleTrap,BoundaryProxyHandler$LWS.defaultOwnKeysTrap=BoundaryProxyHandler$LWS.passthruOwnKeysTrap,BoundaryProxyHandler$LWS.defaultPreventExtensionsTrap=e?BoundaryProxyHandler$LWS.pendingPreventExtensionsTrap:BoundaryProxyHandler$LWS.passthruPreventExtensionsTrap,BoundaryProxyHandler$LWS.defaultSetTrap=e?BoundaryProxyHandler$LWS.pendingSetTrap:BoundaryProxyHandler$LWS.passthruSetTrap,BoundaryProxyHandler$LWS.defaultSetPrototypeOfTrap=e?BoundaryProxyHandler$LWS.pendingSetPrototypeOfTrap:BoundaryProxyHandler$LWS.passthruSetPrototypeOfTrap,J(BoundaryProxyHandler$LWS.prototype,null),P(BoundaryProxyHandler$LWS.prototype),o(createPointer$LWS(we),e?noop$LWS:()=>{const e=Ze;return Ze=void 0,e},e=>"object"==typeof e&&null!==e||"function"==typeof e?getTransferablePointer$LWS(e):"undefined"==typeof e?void 0:e,(e,t)=>{e();const r=Ze;Ze=void 0;const o=null==r?void 0:r[t];return createPointer$LWS("undefined"==typeof o?void 0:o)},e?e=>{try{const t=Te(e);return"object"==typeof t&&null!==t||"function"==typeof t?getTransferablePointer$LWS(t):t}catch(e){throw pushErrorAcrossBoundary$LWS(e)}}:noop$LWS,(e,t)=>{e();const r=Ze;Ze=void 0,("object"==typeof r&&null!==r||"function"==typeof r)&&D(Le,ae,[r,t])},(e,t,r,o)=>{const{proxy:n}=new BoundaryProxyHandler$LWS(e,t,r,o);return D(Le,ae,[n,e]),createPointer$LWS(n)},(e,t,...r)=>{e();const o=Ze;let n,a;Ze=void 0,"function"==typeof t&&(t(),n=Ze,Ze=void 0);for(let e=0,{length:t}=r;e<t;e+=1){const t=r[e];"function"==typeof t&&(t(),r[e]=Ze,Ze=void 0)}try{a=D(o,n,r)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return"object"==typeof a&&null!==a||"function"==typeof a?getTransferablePointer$LWS(a):"undefined"==typeof a?void 0:a},(e,t,...r)=>{e();const o=Ze;let n,a;Ze=void 0,"function"==typeof t&&(t(),n=Ze,Ze=void 0);for(let e=0,{length:t}=r;e<t;e+=1){const t=r[e];"function"==typeof t&&(t(),r[e]=Ze,Ze=void 0)}try{a=M(o,r,n)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return"object"==typeof a&&null!==a||"function"==typeof a?getTransferablePointer$LWS(a):"undefined"==typeof a?void 0:a},(e,t,r,o,n,a,l,i,s)=>{e();const c=Ze;Ze=void 0;let u=!1;try{u=F(c,t,createDescriptorFromMeta$LWS(r,o,n,a,l,i))}catch(e){throw pushErrorAcrossBoundary$LWS(e)}if(u&&!1===r){let e;try{e=R(c,t)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}if(e&&(J(e,null),!1===e.configurable)){const{value:r,get:o,set:n}=e;s(t,!1,"enumerable"in e?e.enumerable:g,"writable"in e?e.writable:g,"value"in e?"object"==typeof r&&null!==r||"function"==typeof r?getTransferablePointer$LWS(r):r:g,"get"in e?"object"==typeof o&&null!==o||"function"==typeof o?getTransferablePointer$LWS(o):o:g,"set"in e?"object"==typeof n&&null!==n||"function"==typeof n?getTransferablePointer$LWS(n):n:g)}}return u},(e,t)=>{e();const r=Ze;Ze=void 0;try{return G(r,t)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}},(e,t,r,o)=>{e();const n=Ze;let a,l;Ze=void 0,"function"==typeof o?(o(),a=Ze,Ze=void 0):a=o;try{l=I(n,r,a)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}if("object"==typeof l&&null!==l||"function"==typeof l)return getTransferablePointer$LWS(l);if(void 0===l&&r===y&&8&t)try{if(!V(n,r)){const e=D(j,n,[]);"[object Object]"!==e&&(l=D(be,e,[8,-1]))}}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return"undefined"==typeof l?void 0:l},(e,t,r)=>{e();const o=Ze;let n;Ze=void 0;try{n=R(o,t)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}if(n){J(n,null);const{value:e,get:o,set:a}=n;r(t,"configurable"in n?n.configurable:g,"enumerable"in n?n.enumerable:g,"writable"in n?n.writable:g,"value"in n?"object"==typeof e&&null!==e||"function"==typeof e?getTransferablePointer$LWS(e):"undefined"==typeof e?void 0:e:g,"get"in n?"object"==typeof o&&null!==o||"function"==typeof o?getTransferablePointer$LWS(o):o:g,"set"in n?"object"==typeof a&&null!==a||"function"==typeof a?getTransferablePointer$LWS(a):a:g)}},e=>{e();const t=Ze;let r;Ze=void 0;try{r=N(t)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return"undefined"==typeof r?null:r?getTransferablePointer$LWS(r):r},(e,t)=>{e();const r=Ze;Ze=void 0;try{return V(r,t)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}},e=>{e();const t=Ze;Ze=void 0;try{return U(t)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}},(e,t)=>{e();const r=Ze;let o;Ze=void 0;try{o=z(r)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}D(t,void 0,o)},e=>{e();const t=Ze;Ze=void 0;let r=2;try{Z(t)&&(r=4)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return 2&r&&U(t)&&(r|=1),r},(e,t,r,o)=>{e();const n=Ze;let a,l;Ze=void 0,"function"==typeof r?(r(),a=Ze,Ze=void 0):a=r,"function"==typeof o?(o(),l=Ze,Ze=void 0):l=o;try{return X(n,t,a,l)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}},(e,t)=>{e();const r=Ze;let o;Ze=void 0,"function"==typeof t?(t(),o=Ze,Ze=void 0):o=null;try{return J(r,o)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}},LOCKER_UNMINIFIED_FLAG$LWS&&!e?(...e)=>{if(void 0===$&&($=D(C,we,[d]),$))try{_e(),Ge()}catch(e){}if($){for(let t=0,{length:r}=e;t<r;t+=1){const r=e[t];"function"==typeof r&&(r(),e[t]=Ze,Ze=void 0)}try{D(Pe,ve,e)}catch(e){}return!0}return!1}:()=>!1,e?(e,...t)=>{e();const r=Ze;Ze=void 0;for(let e=0,{length:o}=t;e<o;e+=7)F(r,t[e],createDescriptorFromMeta$LWS(t[e+1],t[e+2],t[e+3],t[e+4],t[e+5],t[e+6]))}:noop$LWS,e?noop$LWS:e=>{e();const t=Ze;let r;Ze=void 0;try{r=D(We,K,[t])}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return r?getTransferablePointer$LWS(r):r},e?()=>0:e=>{e();const t=Ze;Ze=void 0;try{if(!U(t))return x(t)||O(t)?0:1}catch(e){try{Y(t)}catch(e){return 8}}return 0},e=>{e();const t=Ze;Ze=void 0;try{const e=D(j,t,[]);return"[object Object]"===e?"Object":D(be,e,[8,-1])}catch(e){throw pushErrorAcrossBoundary$LWS(e)}},_e,e?(e,...t)=>{const r=D(Q,t,[g]);let o,n;-1===r?o=t:(o=D(ee,t,[0,r]),n=D(ee,t,[r+1])),e();const a=Ze;Ze=void 0;let l=qe(a);void 0===l&&(l={__proto__:null},et(a,l));for(let e=0,{length:t}=o;e<t;e+=1){const t=o[e];l[t]=!0,F(a,t,{__proto__:null,configurable:!0,get:()=>(Ye(a,t,l),I(a,t)),set(e){Ye(a,t,l),X(a,t,e)}})}Qe(n)}:noop$LWS,e?alwaysFalse$LWS:e=>{e();const t=Ze;if(Ze=void 0,t===m)return!1;try{if("object"==typeof t){const{constructor:e}=t;if(e===n)return!0;if(null===N(t)&&("function"!=typeof e||e.prototype!==t))return!0;if(te(t))return!0;try{return D(re,t,[]),!0}catch(e){}try{if(t!==ue)return D(he,t,[]),!0}catch(e){}}return D(C,t,[h])}catch(e){}return!1},e?alwaysFalse$LWS:e=>{e();const t=Ze;Ze=void 0;try{return Y(t),!1}catch(e){}return!0},e?e=>{e();const t=Ze;Ze=void 0;try{return V(t,y)?De(t):je(t)}catch(e){}}:noop$LWS,e?noop$LWS:(e,t)=>{e();const r=Ze;Ze=void 0,t();const o=Ze;Ze=void 0;try{D(Le,K,[r,o])}catch(e){throw pushErrorAcrossBoundary$LWS(e)}},(e,r)=>{e();const o=Ze;let n;Ze=void 0;try{n=w(o)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}const a=z(n),{length:l}=a,i=new t(7*l);for(let e=0,t=0;e<l;e+=1,t+=7){const r=a[e],o=n[r];J(o,null);const{value:l,get:s,set:c}=o;i[t]=r,i[t+1]="configurable"in o?o.configurable:g,i[t+2]="enumerable"in o?o.enumerable:g,i[t+3]="writable"in o?o.writable:g,i[t+4]="value"in o?"object"==typeof l&&null!==l||"function"==typeof l?getTransferablePointer$LWS(l):l:g,i[t+5]="get"in o?"object"==typeof s&&null!==s||"function"==typeof s?getTransferablePointer$LWS(s):s:g,i[t+6]="set"in o?"object"==typeof c&&null!==c||"function"==typeof c?getTransferablePointer$LWS(c):c:g}let s;D(r,void 0,i);try{s=N(o)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return"undefined"==typeof s?null:s?getTransferablePointer$LWS(s):s},(e,t)=>{e();const r=Ze;let o;Ze=void 0;try{if(D(C,r,[t]))return!0;o=N(r)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return"undefined"==typeof o?null:o?getTransferablePointer$LWS(o):o},(e,t,r)=>{e();const o=Ze;let n,a;Ze=void 0;try{n=R(o,t)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}if(n){J(n,null);const{value:e,get:o,set:a}=n;return r(t,"configurable"in n?n.configurable:g,"enumerable"in n?n.enumerable:g,"writable"in n?n.writable:g,"value"in n?"object"==typeof e&&null!==e||"function"==typeof e?getTransferablePointer$LWS(e):"undefined"==typeof e?void 0:e:g,"get"in n?"object"==typeof o&&null!==o||"function"==typeof o?getTransferablePointer$LWS(o):o:g,"set"in n?"object"==typeof a&&null!==a||"function"==typeof a?getTransferablePointer$LWS(a):a:g),void 0}try{a=N(o)}catch(e){throw pushErrorAcrossBoundary$LWS(e)}return"undefined"==typeof a?null:a?getTransferablePointer$LWS(a):a}),(...e)=>{const{6:t,7:r,8:o,9:n,10:a,11:l,12:i,13:s,14:c,15:u,16:p,17:y,18:f,19:d,20:h,22:S,23:b,24:g,25:$,27:L,28:v,29:P,30:T,31:w,32:x,33:O}=e;se=t,pe=r,ye=o,fe=n,de=a,Se=l,ge=i,$e=s,xe=c,me=u,Ee=p,Ae=y,Be=f,He=d,Ce=h,ke=S,Me=b,Fe=g,Ge=$,Ie=L,Re=v,Ne=P,Ke=T,Ve=w,Ue=x,ze=O,W[0]=createApplyOrConstructTrapForZeroOrMoreArgs$LWS(1),W[1]=createApplyOrConstructTrapForOneOrMoreArgs$LWS(1),W[2]=createApplyOrConstructTrapForTwoOrMoreArgs$LWS(1),W[3]=createApplyOrConstructTrapForThreeOrMoreArgs$LWS(1),W[4]=createApplyOrConstructTrapForFourOrMoreArgs$LWS(1),W.n=createApplyOrConstructTrapForAnyNumberOfArgs$LWS(1),oe[0]=createApplyOrConstructTrapForZeroOrMoreArgs$LWS(2),oe[1]=createApplyOrConstructTrapForOneOrMoreArgs$LWS(2),oe[2]=createApplyOrConstructTrapForTwoOrMoreArgs$LWS(2),oe[3]=createApplyOrConstructTrapForThreeOrMoreArgs$LWS(2),oe[4]=createApplyOrConstructTrapForFourOrMoreArgs$LWS(2),oe.n=createApplyOrConstructTrapForAnyNumberOfArgs$LWS(2)}}}const V=TypeError,U=WeakMap,{apply:z}=Reflect,{get:Z,set:X}=U.prototype,J=`\n'use strict';\n(${createMembraneMarshall$LWS.toString()})`,Y=new U;function createConnector$LWS(e){if("function"!=typeof e)throw new V("Missing evaluator function.");let t=z(Z,Y,[e]);return void 0===t&&(t=e(J)(!0),z(X,Y,[e,t])),t}const q=Symbol.for("@@lockerNearMembraneUndefinedValue"),Q=Array,ee=Error,te=Object,{push:re}=Q.prototype,{assign:oe}=te,{apply:ne,ownKeys:ae}=Reflect;class VirtualEnvironment$LWS{constructor(e){if(void 0===e)throw new ee("Missing VirtualEnvironmentOptions options bag.");const{blueConnector:t,redConnector:r,distortionCallback:o,instrumentation:n}=oe({__proto__:null},e);let a;const l=t("blue",(...e)=>{a=e},{distortionCallback:o,instrumentation:n}),{0:i,1:s,2:c,3:u,4:p,5:y,6:f,7:d,8:h,9:S,10:b,11:g,12:$,13:W,14:L,15:v,16:P,17:T,18:w,19:x,20:O,21:m,22:_,23:E,24:A,25:B,26:H,27:C,28:k,29:j,30:D,31:M,32:F,33:G}=a;let I;const R=r("red",(...e)=>{I=e}),{0:N,1:K,2:V,3:U,4:z,5:Z,6:X,7:J,8:Y,9:q,10:Q,11:te,12:re,13:ne,14:ae,15:le,16:ie,17:se,18:ce,19:ue,20:pe,21:ye,22:fe,23:de,24:he,25:Se,26:be,27:ge,28:$e,29:We,30:Le,31:ve,32:Pe,33:Te}=I;l(N,K,V,U,z,Z,X,J,Y,q,Q,te,re,ne,ae,le,ie,se,ce,ue,pe,ye,fe,de,he,Se,be,ge,$e,We,Le,ve,Pe,Te),R(i,s,c,u,p,y,f,d,h,S,b,g,$,W,L,v,P,T,w,x,O,m,_,E,A,B,H,C,k,j,D,M,F,G),this.blueGlobalThisPointer=i,this.blueGetSelectedTarget=s,this.blueGetTransferableValue=c,this.blueCallableGetPropertyValuePointer=u,this.blueCallableLinkPointers=y,this.redGlobalThisPointer=N,this.redCallableGetPropertyValuePointer=U,this.redCallableEvaluate=z,this.redCallableLinkPointers=Z,this.redCallableSetPrototypeOf=ue,this.redCallableDefineProperties=ye,this.redCallableInstallLazyPropertyDescriptors=be}evaluate(e){try{const t=this.redCallableEvaluate(e);return"function"==typeof t?(t(),this.blueGetSelectedTarget()):t}catch(e){var t;throw null!=(t=this.blueGetSelectedTarget())?t:e}}lazyRemapProperties(e,t,r){const o=[this.blueGetTransferableValue(e)];ne(re,o,t),null!=r&&r.length&&(o[o.length]=q,ne(re,o,r)),ne(this.redCallableInstallLazyPropertyDescriptors,void 0,o)}link(...e){let t=this.blueGlobalThisPointer,r=this.redGlobalThisPointer;for(let o=0,{length:n}=e;o<n;o+=1){const n=e[o];t=this.blueCallableGetPropertyValuePointer(t,n),r=this.redCallableGetPropertyValuePointer(r,n),this.redCallableLinkPointers(r,t),this.blueCallableLinkPointers(t,r)}}remapProperties(e,t){const r=this.blueGetTransferableValue(e),o=ae(t),{length:n}=o,a=new Q(1+7*n);a[0]=r;for(let e=0,r=1;e<n;e+=1,r+=7){const n=o[e],l=t[n],i=oe({__proto__:null},l);a[r]=n,a[r+1]="configurable"in i?!!i.configurable:q,a[r+2]="enumerable"in i?!!i.enumerable:q,a[r+3]="writable"in i?!!i.writable:q,a[r+4]="value"in i?this.blueGetTransferableValue(i.value):q,a[r+5]="get"in i?this.blueGetTransferableValue(i.get):q,a[r+6]="set"in i?this.blueGetTransferableValue(i.set):q}ne(this.redCallableDefineProperties,this,a)}remapProto(e,t){const r=this.blueGetTransferableValue(e),o=t?this.blueGetTransferableValue(t):t;this.redCallableSetPrototypeOf(r,o)}}const{includes:le}=Array.prototype,{assign:ie}=Object,{apply:se,ownKeys:ce}=Reflect,ue=["AggregateError","Array","Error","EvalError","Function","Object","Proxy","RangeError","ReferenceError","SyntaxError","TypeError","URIError","eval","globalThis"],pe=["globalThis","Infinity","NaN","undefined","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","BigInt","Boolean","FinalizationRegistry","Number","RegExp","String","Symbol","WeakRef","JSON","Math","Reflect","escape","unescape",...ue];function getFilteredGlobalOwnKeys$LWS(e){const t=[];let r=0;const o=ce(e);for(let e=0,{length:n}=o;e<n;e+=1){const n=o[e];se(le,pe,[n])||(t[r++]=n)}return t}const ye=WeakMap,{apply:fe,getPrototypeOf:de,ownKeys:he}=Reflect,{get:Se,set:be}=ye.prototype,ge=new ye,$e=(()=>{const{navigator:{userAgent:e,userAgentData:t}}=window,r=null==t?void 0:t.brands;if(Array.isArray(r)&&r.length?r.find(e=>"Chromium"===(null==e?void 0:e.brand)):/ (?:Headless)?Chrome\/\d+/.test(e))return["window"]})();function getCachedGlobalObjectReferences$LWS(e){let t=fe(Se,ge,[e]);if(t)return t;const{document:r,window:o}=e,n=de(o),a=de(n),l=de(a);return t={document:r,DocumentProto:de(r),window:o,WindowProto:n,WindowPropertiesProto:a,EventTargetProto:l,EventTargetProtoOwnKeys:he(l)},fe(be,ge,[e,t]),t}function filterWindowKeys$LWS(e){const t=[];let r=0;for(let o=0,{length:n}=e;o<n;o+=1){const n=e[o];"document"!==n&&"location "!==n&&"top"!==n&&"window"!==n&&"chrome"!==n&&(t[r++]=n)}return t}getCachedGlobalObjectReferences$LWS(window);const We=Object,Le=TypeError,{prototype:ve}=Document,{prototype:Pe}=Node,{remove:Te,setAttribute:we}=Element.prototype,{appendChild:xe}=Pe,{assign:Oe}=We,{__lookupGetter__:me}=We.prototype,{apply:_e}=Reflect,{close:Ee,createElement:Ae,open:Be}=ve,He=_e(me,ve,["body"]),Ce=_e(me,HTMLElement.prototype,["style"]),ke=_e(me,HTMLIFrameElement.prototype,["contentWindow"]),je=_e(me,Pe,["lastChild"]),De=document,Me=createMembraneMarshall$LWS();let Fe=null;function createIframeVirtualEnvironment$LWS(e,t,r){if("object"!=typeof e)throw new Le("Missing global object shape.");if("object"!=typeof t||null===t)throw new Le("Missing global object virtualization target.");const{distortionCallback:o,endowments:n,instrumentation:a,keepAlive:l=!1}=Oe({__proto__:null},r),i=function(){const e=_e(Ae,De,["iframe"]),t=_e(He,De,[])||_e(je,De,[]);return _e(Ce,e,[]).display="none",_e(we,e,["sandbox","allow-same-origin allow-scripts"]),_e(xe,t,[e]),e}(),s=_e(ke,i,[]),c=null===e;c&&null===Fe&&(Fe=filterWindowKeys$LWS(getFilteredGlobalOwnKeys$LWS(s)));const u=getCachedGlobalObjectReferences$LWS(t),p=new VirtualEnvironment$LWS({blueConnector:Me,distortionCallback:o,redConnector:createConnector$LWS(s.eval),instrumentation:a});if(!function(e,t){for(let r=0,{length:o}=ue;r<o;r+=1){const o=ue[r],n=t[o];n&&(n.prototype?e.link(o,"prototype"):e.link(o))}}(p,t),"undefined"==typeof globalThis?p.link("window","document"):p.link("document"),p.link("__proto__","__proto__","__proto__"),p.remapProto(u.document,u.DocumentProto),p.lazyRemapProperties(u.window,c?Fe:filterWindowKeys$LWS(getFilteredGlobalOwnKeys$LWS(e)),l?void 0:$e),n){const e={};!function(e,t){const r=ce(t);for(let o=0,{length:n}=r;o<n;o+=1){const n=r[o];if(!se(le,pe,[n])){const r=t[n];r&&(e[n]=ie({__proto__:null},r))}}return e}(e,n),delete(y=e).document,delete y.location,delete y.top,delete y.window,delete y.chrome,p.remapProperties(u.window,e)}var y;if(p.lazyRemapProperties(u.EventTargetProto,u.EventTargetProtoOwnKeys),l){const{document:e}=s;_e(Be,e,[]),_e(Ee,e,[])}else _e(Te,i,[]);return p}const Ge={[a]:{__proto__:null,get:()=>clearEvalContext$LWS()},[c]:{__proto__:null,get:()=>clearEvalHelpers$LWS()}},Ie=new RegExp(`\\breturn\\s*\\[\\s*(["'])${u}\\1\\s*,\\s*([^,\\s]+)\\s*,\\s*(["'])=\\3\\s*,\\s*([^\\]\\s]+)\\s*\\]`,"g"),Re=new e,Ne={__proto__:null};let Ke,Ve;function clearEvalContext$LWS(){const e=Ke;return Ke=void 0,e}function clearEvalHelpers$LWS(){const e=Ve;return Ve=void 0,e}function createSandbox$LWS(l,i,s,c){const u=new e(i(window)),p=createIframeVirtualEnvironment$LWS(null,window,{distortionCallback(e){const o=t(u,e);if(o)return o;if(R(e)&&N(e)){const t=i(e);for(let e=0,{length:o}=t;e<o;e+=1){const{0:o,1:n}=t[e];r(u,o,n)}r(u,e,e)}return e},endowments:o({},Ge,s?n(s):void 0),keepAlive:!1,instrumentation:c}),y={};setEvalContext$LWS(e=>{o(y,e({elementToLoadingPromiseMap:Re}))});const f={distortionFactory:i,distortions:u,env:p,helpers:y};return p.evaluate(`'use strict';\n        ${a}(${function(e){const{elementToLoadingPromiseMap:t}=e,r=Promise,o=TypeError,{asyncIterator:n,iterator:a}=Symbol,{[a]:l}=Array.prototype,i=function*(){}.constructor.prototype.prototype,{next:s,throw:c}=i,{delete:u,get:p,set:y}=Map.prototype,{appendChild:f}=Node.prototype,{freeze:d}=Object,{then:h}=r.prototype,S=r.resolve.bind(r),{apply:b,getPrototypeOf:g,setPrototypeOf:$}=Reflect,{get:W,set:L}=WeakMap.prototype,{createElement:v}=Document.prototype,{querySelector:P,setAttribute:T}=Element.prototype,{stopPropagation:w}=Event.prototype,{addEventListener:x}=EventTarget.prototype,O=document,{head:m}=O,_=new Map,E="data-locker-id",A=`${crypto.getRandomValues(new Uint32Array(1))[0]}`;function genStep$LWS(e,t,r,o,n,a,l){let i,s;try{i=b(a,e,[l]),s=i.value}catch(e){return r(e),void 0}i.done?t(s):S(s).then(o,n)}function loadPromise$LWS(e,o){const n=new r((t,r)=>{b(x,e,["load",()=>{t(void 0)}]),b(x,e,["error",e=>{b(w,e,[]),r(`[Locker] resource loader error loading "${o}"`)}])});return b(L,t,[e,n]),b(f,m,[e]),n}return{asyncToGen:function(e,t,o){return new r((r,n)=>{const a=b(e,t,o);function next$LWS(e){genStep$LWS(a,r,n,next$LWS,thrower$LWS,s,e)}function thrower$LWS(e){genStep$LWS(a,r,n,next$LWS,thrower$LWS,c,e)}next$LWS(void 0)})},forAwaitOf:function(e,t,l){if(0===t){let t=!1,{[n]:r}=l;if(null==r&&(t=!0,({[a]:r}=l)),"function"!=typeof r)throw new o("Object is not iterable.");return b(y,_,[e,{iterable:b(r,l,[]),step:void 0,sync:t}]),void 0}const i=b(p,_,[e]);if(1===t){const e=i.iterable.next();return i.sync?new r(t=>{i.step=e,t()}):b(h,e,[e=>{i.step=e}])}if(2===t)return i.step.value;if(3===t){const t=!!i.step.done;return t&&b(u,_,[e]),t}},loadScript:function(e,r){let o=b(P,m,[`script[data-distorted-src='${r}'][data-locker-id='${A}']`]);var n;return o?null!=(n=b(W,t,[o]))?n:S():(o=b(v,O,["script"]),b(T,o,[E,A]),o.type="text/javascript",o.src=r,loadPromise$LWS(o,r))},loadStyle:function(e,r){let o=b(P,m,[`link[href='${r}']`]);var n;return o?null!=(n=b(W,t,[o]))?n:S():(o=b(v,O,["link"]),o.type="text/css",o.rel="stylesheet",o.href=r,loadPromise$LWS(o,r))},namespace:function(e){return d(e)},spreadable:function(e){return $(e,null),e[a]=l,e},super:function(e,t,r,o){const n=g(e.prototype)[t];return b(n,r,o)}}}})`),Ne[l]=f,f}function getSandbox$LWS(e){return Ne[e]}function setEvalContext$LWS(e){Ke=e}function setEvalHelpers$LWS(e){Ve=e}function toSource$LWS(e){let t=l(e);return"function"==typeof e&&(t=i(t,/^[\s\S]+?\{(?:[\t ]*\r?\n)?([\s\S]*?)(?:\r?\n[\t ]*)?\}$/)[1]),t=s(t,/\/\/# sandbox(?=MappingURL=.*?\s*$)/,"//# source"),t=s(t,Ie,(e,t,r,o,n)=>`${r}=${n}`),`'use strict';${t}`}function evaluateInSandbox$LWS(e,t,r,o,n=I,a=!1){const l={sandboxKey:e},i="object"==typeof n&&null!==n&&n.startActivity,s=i("EvaluateInSandboxDuration",l);let c,u=getSandbox$LWS(e);if(void 0===u){p(o)||(o=void 0);const t={__proto__:null,instrumentation:n,sandboxType:M.External,verboseInstrumentation:a},distortionFactory$LWS=r=>{const o=i("createExternalDistortionEntries",l),n=F(r,e,evaluateInSandbox$LWS,t);return o.stop(),n},r=i("createSandbox",l);u=createSandbox$LWS(e,distortionFactory$LWS,o,a?n:void 0),r.stop()}setEvalContext$LWS(r),setEvalHelpers$LWS(u.helpers);const y=toSource$LWS(t),f=i("externalEvaluatorDuration",l);try{c=u.env.evaluate(y)}catch(t){throw f.error({sandboxKey:e,error:t}),t}finally{clearEvalContext$LWS(),clearEvalHelpers$LWS(),f.stop()}return s.stop(),c}const Ue="lws-core-sandbox";function evaluateInCoreSandbox$LWS(e,t,r,o,n=I,a=!1){const l={sandboxKey:"lws-core-sandbox"},i="object"==typeof n&&null!==n&&n.startActivity,s=i("EvaluateInCoreSandboxDuration",l);let c,u=getSandbox$LWS("lws-core-sandbox");if(void 0===u){p(o)||(o=void 0);const e={__proto__:null,instrumentation:n,sandboxType:M.Internal,verboseInstrumentation:a},distortionFactory$LWS=t=>{const r=i("createInternalDistortionEntries",l),o=G(t,"lws-core-sandbox",evaluateInCoreSandbox$LWS,e);return r.stop(),o},t=i("createSandbox",l);u=createSandbox$LWS("lws-core-sandbox",distortionFactory$LWS,o,a?n:void 0),t.stop()}setEvalContext$LWS(r),setEvalHelpers$LWS(u.helpers);const y=toSource$LWS(t),f=i("internalEvaluatorDuration",l);try{c=u.env.evaluate(y)}catch(e){throw f.error({sandboxKey:"lws-core-sandbox",error:e}),e}finally{clearEvalContext$LWS(),clearEvalHelpers$LWS(),f.stop()}return s.stop(),c}const ze=y("@@lockerDebugMode");if(LOCKER_UNMINIFIED_FLAG$LWS){let e=!0;const t=100,r=5,o=100,n=o/2,a=/^[0-9]$|^[1-9][0-9]+$/,l="display: inline-block; margin-bottom: 3px; margin-left: -3px; word-break: break-all; word-wrap: wrap;",i={style:"margin-left:11px; margin-bottom: 3px;"},s={style:"display: inline-block; margin-left:12px; word-break: break-all; word-wrap: wrap;"},c={style:"color: #9d288c; font-weight: bold"},u={style:"color: #b17ab0"},p={style:"color: #16239f"},y={style:"color: #236d25"},M={style:"color: #606367"},F={style:"color: #b82619"},formatValue$LWS=function(e){if(null==e)return["span",M,`${e}`];if("boolean"==typeof e)return["span",p,e];if("number"==typeof e)return j(e)?["span",p,e]:["span",p,(e>=0?"":"-")+"Infinity"];if("string"==typeof e){let t=e;const{length:r}=t;if(r>o){t=`${O(t,0,n)}…${O(t,r-n-1,r)}`}return["span",F,D(t)]}return f(e)?["span",{},`Array(${e.length})`]:k(e)?["span",{},"{…}"]:["span",F,m(e)]},formatHeader$LWS=function(e,o={}){const n=[],{isChildElement:l}=o;let i=0;l&&(n[i++]=["span",c,o.childKey],n[i++]=["span",{},": "]);const s=g(e);let u=$(e);if(s===W)L(u,"description")||v(u,"description");else if(s===P){const{length:t}=e;u=T(u,e=>!w(a,e)||+e>=t)}const{length:d}=u;if(f(e)){n[i++]=["span",l?M:{},`(${e.length}) [`];for(let r=0,o=x(d,t);r<o;r+=1){const t=e[u[r]];n[i++]=["span",{},r?", ":""],n[i++]=formatValue$LWS(t)}return d>t&&(n[i++]=["span",null,["span",{},", …"]]),n[i++]=["span",{},"]"],n}let h,S="{";switch(s){case B:case A:case E:case P:case W:{let t=p;s===B?t=y:s===W&&(t=F),S=`${O(s,8,-1)} {`,h=["span",t,`${m(_(e))}`];break}}n[i++]=["span",{},S],h&&(n[i++]=h,d&&(n[i++]=["span",{},", "]));for(let t=0,o=x(d,r);t<o;t+=1){const r=u[t],o=e[r];n[i++]=["span",{},t?", ":""],n[i++]=["span",M,r],n[i++]=["span",{},": "],n[i++]=formatValue$LWS(o)}return d>r&&(n[i++]=["span",null,["span",{},", …"]]),n[i++]=["span",{},"}"],n},formatBody$LWS=function(e){const t=$(e),r=H(e);f(e)||C(r);const o=[];let n=0;for(let a=0,{length:l}=r;a<l;a+=1){const l=r[a],s=e[l];if(k(s))o[n++]=["div",{},["object",{object:s,config:{childKey:m(l),isChildElement:!0}}]];else{let e=c;"symbol"!=typeof l&&L(t,l)||(e=u),o[n++]=["div",i,["span",e,m(l)],["span",{},": "],formatValue$LWS(s)]}}return o};let{devtoolsFormatters:G}=window;f(G)||(G=[],d(window,"devtoolsFormatters",{__proto__:null,configurable:!0,value:G,writable:!0})),G[G.length]={header(t,r={}){if(e&&(e=!1,d(window,ze,{__proto__:null,configurable:!0,value:!0,writable:!0})),!h(t))return null;const o=["div",{style:`${l}${r.isChildElement?"":"font-style: italic;"}`}];return S(b,o,formatHeader$LWS(t,r)),["div",{},o]},hasBody:()=>!0,body(e){const t=["div",s];return S(b,t,formatBody$LWS(e)),t}}}export{Ue as CORE_SANDBOX_KEY,evaluateInCoreSandbox$LWS as evaluateInCoreSandbox,evaluateInSandbox$LWS as evaluateInSandbox};
